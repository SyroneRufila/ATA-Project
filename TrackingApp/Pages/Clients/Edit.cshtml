@page "{id:Guid}"
@model TrackingApp.Pages.Clients.EditModel
@{
    var message = ViewData["Message"]?.ToString();
}
<br>
<h2>Edit Client</h2>

<form method="post">
    

            
    <div class="form-container" id="formContainer" style="display: block; height: 900px; max-height: 900px">
        <h2>Edit Client List</h2>

        <div class="form-group" style="padding-bottom: 20px;">
            <label for="id" class="form-label" style="font-size: smaller;">ID:</label>
            <input type="text" id="id" class="form-input" asp-for="EditClientViewModel.id" readonly style="width: 310px;" />
        </div>


        <div class="form-content" style=" height: 900px; max-height: 900px">


            <div class="form-content" >
                <div>
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <span class="input-group-text">Select Program</span>
                        </div>
                        <select class="form-control" id="program" asp-for="EditClientViewModel.program" required>
                            <option value="" disabled selected>Select Course</option>
                            <optgroup label="2-year Programs">
                                <option value="ACT">Associate in Computer Technology (ACT)</option>
                                <option value="IT">Information Technology (IT)</option>
                                <option value="ART">Associate in Retail Technology (ART)</option>
                                <option value="PCA">Professional Culinary Arts</option>
                                <option value="HRS">Hospitality and Restaurant Services (HRS)</option>
                                <option value="TEM">Tourism and Events Management (TEM)</option>
                            </optgroup>
                            <optgroup label="Bachelor's Programs">
                                <option value="BSA">BS in Accountancy (BSA)</option>
                                <option value="BSAIS">BS in Accounting Information System (BSAIS)</option>
                                <option value="BSBA">BS in Business Administration (BSBA)</option>
                                <option value="BSCS">BS in Computer Science (BSCS)</option>
                                <option value="BSCpE">BS in Computer Engineering (BSCpE)</option>
                                <option value="BSCM">BS in Culinary Management (BSCM)</option>
                                <option value="BSIT">BS in Information Technology (BSIT)</option>
                                <option value="BSIS">BS in Information Systems (BSIS)</option>
                                <option value="BSHM">BS in Hospitality Management (BSHM)</option>
                                <option value="BSMA">BS in Management Accounting (BSMA)</option>
                                <option value="BMMA">Bachelor of Multimedia Arts (BMMA)</option>
                                <option value="BACOMM">BA in Communication (BACOMM)</option>
                                <option value="BSMarE">Bachelor of Science in Naval Architecture and Marine Engineering (BSNAME)</option>
                                <option value="BSMT">Bachelor of Science in Marine Transportation (BSMT)</option>
                                <option value="BSRTCS">BS in Retail Technology and Consumer Science (BSRTCS)</option>
                                <option value="BSTM">BS in Tourism Management (BSTM)</option>
                            </optgroup>
                        </select>
                    </div>
                </div>

                <div class="name-fields">
                    <div>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">First Name</span>
                            </div>
                            <input type="text" class="form-control" asp-for="EditClientViewModel.firstname" />
                        </div>
                    </div>
                    <div>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">Last Name</span>
                            </div>
                            <input type="text" class="form-control" asp-for="EditClientViewModel.lastname" />
                        </div>
                    </div>
                    <div>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">Middle Name</span>
                            </div>
                            <input type="text" class="form-control" asp-for="EditClientViewModel.middlename" />
                        </div>
                    </div>
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <span class="input-group-text">Suffix Name</span>
                        </div>
                        <select class="form-select" id="suffixname" value="Select Options" asp-for="EditClientViewModel.suffixname">
                            <option value=" ">None</option>
                            <option value="Sr.">Sr.</option>
                            <option value="Jr.">Jr.</option>
                            <option value="Others">Others</option>
                        </select>
                    </div>
                </div>

                <div class="address-fields">
                    <div>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">Present Address</span>
                            </div>
                            <input type="text" class="form-control" asp-for="EditClientViewModel.housenumber" />
                        </div>
                    </div>
                    <div>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">Country</span>
                            </div>
                            <input type="text" id="country" name="country" value="Philippines" class="form-control" asp-for="EditClientViewModel.country">
                        </div>
                    </div>
                    <div>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">Zip Code</span>
                            </div>
                            <input type="text" class="form-control" asp-for="EditClientViewModel.zipcode" />
                        </div>
                    </div>
                </div>

                <div class="graduation">
                    <div>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">Graduate</span>
                            </div>
                            <select class="form-select" id="graduate" asp-for="EditClientViewModel.graduate">
                                <option value="Yes">Yes</option>
                                <option value="No">No</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">Year Graduated</span>
                            </div>
                            <input type="text" id="yeargraduated" class="form-control" asp-for="EditClientViewModel.yeargraduated" />
                        </div>
                    </div>
                    <div>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">Student Number</span>
                            </div>
                            <input type="text" class="form-control" asp-for="EditClientViewModel.studentnumber" />
                        </div>
                    </div>
                    <div>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">Email</span>
                            </div>
                            <input type="email" class="form-control" asp-for="EditClientViewModel.email" />
                        </div>
                    </div>
                    <div>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">Mobile Number</span>
                            </div>
                            <input type="text" class="form-control" asp-for="EditClientViewModel.mobilenumber" />
                        </div>
                    </div>
                </div>


                <div>
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <span class="input-group-text">Are you currently employed</span>
                        </div>
                        <select class="form-select" id="employed" value="Select Options" asp-for="EditClientViewModel.employment" onchange="toggleEmploymentDetails(this.value)">
                            <option value="No">No</option>
                            <option value="Yes">Yes</option>
                        </select>
                    </div>
                </div>
                <div class="employment-details" id="employmentDetails">
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <span class="input-group-text">Current Employer</span>
                        </div>
                        <input type="text" id="currentEmployer" class="form-control" asp-for="EditClientViewModel.currentemployer">
                    </div>
                    <div class="input-group" style="padding-top: 10px; padding-bottom: 10px;">
                        <div class="input-group-prepend">
                            <span class="input-group-text">Year of Stay</span>
                        </div>
                        <input type="text" class="form-control" asp-for="EditClientViewModel.yearsstay">
                    </div>
                    <div class="input-group" style="padding-bottom: 10px;">
                        <div class="input-group-prepend">
                            <span class="input-group-text">Position</span>
                        </div>
                        <input type="text" class="form-control" asp-for="EditClientViewModel.position">
                    </div>
                    <div class="input-group" style="padding-bottom: 10px;">

                        <div class="input-group-prepend">
                            <span class="input-group-text">Job Level</span>
                        </div>
                        <input type="text" class="form-control" asp-for="EditClientViewModel.joblevel">
                    </div>
                </div>

                <div>
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <span class="input-group-text">Document(s) Request</span>
                        </div>
                        <select class="form-select"asp-for="EditClientViewModel.recordRequested">
                            <option value="">Select Option </option>
                            <option value="diploma">Diploma</option>
                            <option value="form137">Form 137</option>
                            <option value="certification">Certification</option>
                            <option value="others">Others</option>
                        </select>
                    </div>
                </div>

                <div>
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <span class="input-group-text">Request Status</span>
                        </div>
                        <select class="form-select" id="status" asp-for="EditClientViewModel.status">
                            <option value="Select employment status" disabled selected>Select document status</option>
                            <option value="Pending">Pending</option>
                            <option value="Received">Received</option>
                        </select>
                    </div>
                </div>



                <div class="form-buttons">
                    <div class="form-group">
                        <div id="popupContainer"></div>
                        <button type="submit" class="btn btn-primary" asp-page-handler="Update" data-toggle="modal" data-target="#updateModal">Update</button>
                        <button type="submit" class="btn btn-danger" asp-page-handler="Delete" onclick="return confirm('Are you sure you want to delete this item?');">Delete</button>
                        <a href="/Clients/List" class="btn btn-dark">Back</a>
                    </div>
                </div>


            </div>
       
        </div>

    </div>
    @if (!string.IsNullOrWhiteSpace(message))
    {
        <div id="pop-out-message" class="pop-out-message">
            @message
        </div>

        <script>
            document.addEventListener('DOMContentLoaded', function () {
                var popOutMessage = document.getElementById('pop-out-message');
                popOutMessage.style.display = 'block';

                setTimeout(function () {
                    popOutMessage.style.display = 'none';
                }, 5000); // Adjust the duration (in milliseconds) for how long the message should be displayed
            });
        </script>
    }
</form>




<style>
    .form-buttons {
        position: fixed;
        bottom: 0;
        right: 0;
        padding: 20px;
        width: auto;
    }

    .pop-out-message {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 9999;
        padding: 20px;
        background-color: #fff;
        border: 2px solid #ccc;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        font-size: 18px;
        max-width: 400px;
        text-align: center;
    }
</style>


<script>
    function toggleEmploymentDetails(value) {
        var employmentDetails = document.getElementById("employmentDetails");
        employmentDetails.style.display = (value === "No") ? "none" : "block";
    }

    var urlParams = new URLSearchParams(window.location.search);
    var updateSuccess = urlParams.get('updateSuccess');

    if (updateSuccess) {
        var messageElement = document.createElement('div');
        messageElement.className = 'alert alert-success alert-dismissible fade show';
        messageElement.innerHTML = 'Update successful.';
        messageElement.role = 'alert';

        var closeButton = document.createElement('button');
        closeButton.type = 'button';
        closeButton.className = 'close';
        closeButton.dataset.dismiss = 'alert';
        closeButton.innerHTML = '<span aria-hidden="true">&times;</span>';

        messageElement.appendChild(closeButton);

        var formContainer = document.getElementById('formContainer');
        formContainer.prepend(messageElement);
    }

    document.addEventListener('DOMContentLoaded', function () {
        var employedDropdown = document.getElementById('employed');
        var employmentDetails = document.getElementById('employmentDetails');

        toggleEmploymentDetails(employedDropdown.value);

        employedDropdown.addEventListener('change', function () {
            toggleEmploymentDetails(employedDropdown.value);
        });

        function toggleEmploymentDetails(value) {
            if (value === 'Yes') {
                employmentDetails.style.display = 'block';
            } else {
                employmentDetails.style.display = 'none';
            }
        }
    });


</script>